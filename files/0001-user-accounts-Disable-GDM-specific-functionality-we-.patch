From fcbdb496fe8f542885e4f100deba871d85ca5938 Mon Sep 17 00:00:00 2001
From: Ikey Doherty <ikey@solus-project.com>
Date: Sat, 7 Nov 2015 19:44:18 +0000
Subject: [PATCH] user-accounts: Disable GDM-specific functionality, we don't
 ship it

Signed-off-by: Ikey Doherty <ikey@solus-project.com>
---
 panels/user-accounts/um-user-panel.c | 11 +----------
 1 file changed, 1 insertion(+), 10 deletions(-)

diff --git a/panels/user-accounts/um-user-panel.c b/panels/user-accounts/um-user-panel.c
index f534745..6ed5308 100644
--- a/panels/user-accounts/um-user-panel.c
+++ b/panels/user-accounts/um-user-panel.c
@@ -75,7 +75,6 @@ struct _CcUserPanelPrivate {
         GCancellable  *cancellable;
         GtkBuilder *builder;
         GtkWidget *notification;
-        GSettings *login_screen_settings;
 
         GtkWidget *main_box;
         GPermission *permission;
@@ -926,11 +925,7 @@ show_user (ActUser *user, CcUserPanelPrivate *d)
         /* Fingerprint: show when self, local, enabled, and possible */
         widget = get_widget (d, "account-fingerprint-button");
         label = get_widget (d, "account-fingerprint-label");
-        show = (act_user_get_uid (user) == getuid() &&
-                act_user_is_local_account (user) &&
-                (d->login_screen_settings &&
-                 g_settings_get_boolean (d->login_screen_settings, "enable-fingerprint-authentication")) &&
-                set_fingerprint_label (widget));
+        show = FALSE;
         gtk_widget_set_visible (label, show);
         gtk_widget_set_visible (widget, show);
 
@@ -1750,8 +1745,6 @@ cc_user_panel_init (CcUserPanel *self)
                 return;
         }
 
-        d->login_screen_settings = settings_or_null ("org.gnome.login-screen");
-
         d->password_dialog = um_password_dialog_new ();
         button = get_widget (d, "user-icon-button");
         d->photo_dialog = um_photo_dialog_new (button);
@@ -1774,8 +1767,6 @@ cc_user_panel_dispose (GObject *object)
         g_cancellable_cancel (priv->cancellable);
         g_clear_object (&priv->cancellable);
 
-        g_clear_object (&priv->login_screen_settings);
-
         if (priv->um) {
                 g_signal_handlers_disconnect_by_data (priv->um, priv);
                 priv->um = NULL;
-- 
2.6.2

