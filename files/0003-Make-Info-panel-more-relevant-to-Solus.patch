From 8730ccf9d0e203f98be36af4e06cfaed55172d73 Mon Sep 17 00:00:00 2001
From: Joshua Strobl <joshua@stroblindustries.com>
Date: Sun, 22 Apr 2018 23:12:37 +0300
Subject: [PATCH 3/4] Make Info panel more relevant to Solus.

---
 panels/info/cc-info-overview-panel.c | 22 +++++++++++-----------
 panels/info/info-overview.ui         | 34 ++++++++++++++++++----------------
 panels/info/info.gresource.xml       |  1 -
 3 files changed, 29 insertions(+), 28 deletions(-)

diff --git a/panels/info/cc-info-overview-panel.c b/panels/info/cc-info-overview-panel.c
index 411c1c905..1b51d0cdb 100644
--- a/panels/info/cc-info-overview-panel.c
+++ b/panels/info/cc-info-overview-panel.c
@@ -61,9 +61,9 @@ typedef struct
   GtkWidget      *system_image;
   GtkWidget      *version_label;
   GtkWidget      *name_entry;
+  GtkWidget      *gv_label;
   GtkWidget      *memory_label;
   GtkWidget      *processor_label;
-  GtkWidget      *os_name_label;
   GtkWidget      *os_type_label;
   GtkWidget      *disk_label;
   GtkWidget      *graphics_label;
@@ -772,8 +772,8 @@ info_overview_panel_setup_overview (CcInfoOverviewPanel *self)
   if (res)
     {
       g_autofree gchar *text = NULL;
-      text = g_strdup_printf (_("Version %s"), priv->gnome_version);
-      gtk_label_set_text (GTK_LABEL (priv->version_label), text);
+      text = g_strdup_printf (_("%s"), priv->gnome_version);
+      gtk_label_set_text (GTK_LABEL (priv->gv_label), text);
     }
 
   glibtop_get_mem (&mem);
@@ -789,7 +789,7 @@ info_overview_panel_setup_overview (CcInfoOverviewPanel *self)
   gtk_label_set_text (GTK_LABEL (priv->os_type_label), os_type_text ? os_type_text : "");
 
   os_name_text = get_os_name ();
-  gtk_label_set_text (GTK_LABEL (priv->os_name_label), os_name_text ? os_name_text : "");
+  gtk_label_set_text (GTK_LABEL (priv->version_label), os_name_text ? os_name_text : "");
 
   get_primary_disc_info (self);
 
@@ -797,9 +797,9 @@ info_overview_panel_setup_overview (CcInfoOverviewPanel *self)
 }
 
 static gboolean
-does_gnome_software_exist (void)
+does_solus_sc_exist (void)
 {
-  return g_file_test (BINDIR "/gnome-software", G_FILE_TEST_EXISTS);
+  return g_file_test (BINDIR "/solus-sc", G_FILE_TEST_EXISTS);
 }
 
 static gboolean
@@ -817,10 +817,10 @@ on_updates_button_clicked (GtkWidget           *widget,
   g_auto(GStrv) argv = NULL;
 
   argv = g_new0 (gchar *, 3);
-  if (does_gnome_software_exist ())
+  if (does_solus_sc_exist ())
     {
-      argv[0] = g_build_filename (BINDIR, "gnome-software", NULL);
-      argv[1] = g_strdup_printf ("--mode=updates");
+      argv[0] = g_build_filename (BINDIR, "solus-sc", NULL);
+      argv[1] = g_strdup_printf ("--update-view");
     }
   else
     {
@@ -876,9 +876,9 @@ cc_info_overview_panel_class_init (CcInfoOverviewPanelClass *klass)
   gtk_widget_class_bind_template_child_private (widget_class, CcInfoOverviewPanel, system_image);
   gtk_widget_class_bind_template_child_private (widget_class, CcInfoOverviewPanel, version_label);
   gtk_widget_class_bind_template_child_private (widget_class, CcInfoOverviewPanel, name_entry);
+  gtk_widget_class_bind_template_child_private (widget_class, CcInfoOverviewPanel, gv_label);
   gtk_widget_class_bind_template_child_private (widget_class, CcInfoOverviewPanel, memory_label);
   gtk_widget_class_bind_template_child_private (widget_class, CcInfoOverviewPanel, processor_label);
-  gtk_widget_class_bind_template_child_private (widget_class, CcInfoOverviewPanel, os_name_label);
   gtk_widget_class_bind_template_child_private (widget_class, CcInfoOverviewPanel, os_type_label);
   gtk_widget_class_bind_template_child_private (widget_class, CcInfoOverviewPanel, disk_label);
   gtk_widget_class_bind_template_child_private (widget_class, CcInfoOverviewPanel, graphics_label);
@@ -902,7 +902,7 @@ cc_info_overview_panel_init (CcInfoOverviewPanel *self)
 
   priv->graphics_data = get_graphics_data ();
 
-  if (does_gnome_software_exist () || does_gpk_update_viewer_exist ())
+  if (does_solus_sc_exist () || does_gpk_update_viewer_exist ())
     g_signal_connect (priv->updates_button, "clicked", G_CALLBACK (on_updates_button_clicked), self);
   else
     gtk_widget_destroy (priv->updates_button);
diff --git a/panels/info/info-overview.ui b/panels/info/info-overview.ui
index 219a83c4c..a45ac0fa4 100644
--- a/panels/info/info-overview.ui
+++ b/panels/info/info-overview.ui
@@ -18,7 +18,9 @@
           <object class="GtkImage" id="system_image">
             <property name="visible">True</property>
             <property name="can_focus">False</property>
-            <property name="resource">/org/gnome/control-center/info/GnomeLogoVerticalMedium.svg</property>
+            <property name="pixel_size">192</property>
+            <property name="icon_name">start-here-solus</property>
+            <property name="icon_size">6</property>
           </object>
           <packing>
             <property name="expand">False</property>
@@ -67,12 +69,12 @@
               </packing>
             </child>
             <child>
-              <object class="GtkLabel" id="label5">
+              <object class="GtkLabel" id="label42">
                 <property name="visible">True</property>
                 <property name="can_focus">False</property>
                 <property name="xalign">1</property>
-                <property name="label" translatable="yes">Memory</property>
-                <property name="mnemonic_widget">memory_label</property>
+                <property name="label" translatable="yes">GNOME</property>
+                <property name="mnemonic_widget">gv_label</property>
                 <style>
                  <class name="dim-label"/>
                 </style>
@@ -83,12 +85,12 @@
               </packing>
             </child>
             <child>
-              <object class="GtkLabel" id="label6">
+              <object class="GtkLabel" id="label5">
                 <property name="visible">True</property>
                 <property name="can_focus">False</property>
                 <property name="xalign">1</property>
-                <property name="label" translatable="yes">Processor</property>
-                <property name="mnemonic_widget">processor_label</property>
+                <property name="label" translatable="yes">Memory</property>
+                <property name="mnemonic_widget">memory_label</property>
                 <style>
                  <class name="dim-label"/>
                 </style>
@@ -99,11 +101,12 @@
               </packing>
             </child>
             <child>
-              <object class="GtkLabel" id="label14">
+              <object class="GtkLabel" id="label6">
                 <property name="visible">True</property>
                 <property name="can_focus">False</property>
                 <property name="xalign">1</property>
-                <property name="label" translatable="yes">Graphics</property>
+                <property name="label" translatable="yes">Processor</property>
+                <property name="mnemonic_widget">processor_label</property>
                 <style>
                  <class name="dim-label"/>
                 </style>
@@ -114,12 +117,11 @@
               </packing>
             </child>
             <child>
-              <object class="GtkLabel" id="label7">
+              <object class="GtkLabel" id="label14">
                 <property name="visible">True</property>
                 <property name="can_focus">False</property>
                 <property name="xalign">1</property>
-                <property name="label" translatable="yes" comments="To translators: this field contains the distro name and version">OS name</property>
-                <property name="mnemonic_widget">os_name_label</property>
+                <property name="label" translatable="yes">Graphics</property>
                 <style>
                  <class name="dim-label"/>
                 </style>
@@ -189,7 +191,7 @@
               </packing>
             </child>
             <child>
-              <object class="GtkLabel" id="memory_label">
+              <object class="GtkLabel" id="gv_label">
                 <property name="visible">True</property>
                 <property name="can_focus">False</property>
                 <property name="xalign">0</property>
@@ -202,7 +204,7 @@
               </packing>
             </child>
             <child>
-              <object class="GtkLabel" id="processor_label">
+              <object class="GtkLabel" id="memory_label">
                 <property name="visible">True</property>
                 <property name="can_focus">False</property>
                 <property name="xalign">0</property>
@@ -215,7 +217,7 @@
               </packing>
             </child>
             <child>
-              <object class="GtkLabel" id="graphics_label">
+              <object class="GtkLabel" id="processor_label">
                 <property name="visible">True</property>
                 <property name="can_focus">False</property>
                 <property name="xalign">0</property>
@@ -228,7 +230,7 @@
               </packing>
             </child>
             <child>
-              <object class="GtkLabel" id="os_name_label">
+              <object class="GtkLabel" id="graphics_label">
                 <property name="visible">True</property>
                 <property name="can_focus">False</property>
                 <property name="xalign">0</property>
diff --git a/panels/info/info.gresource.xml b/panels/info/info.gresource.xml
index c96722350..6b90fedda 100644
--- a/panels/info/info.gresource.xml
+++ b/panels/info/info.gresource.xml
@@ -4,6 +4,5 @@
     <file preprocess="xml-stripblanks">info-overview.ui</file>
     <file preprocess="xml-stripblanks">info-default-apps.ui</file>
     <file preprocess="xml-stripblanks">info-removable-media.ui</file>
-    <file>GnomeLogoVerticalMedium.svg</file>
   </gresource>
 </gresources>
-- 
2.16.3

