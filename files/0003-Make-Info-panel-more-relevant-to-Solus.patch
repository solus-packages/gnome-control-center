From 604ae9e92b853321bfd7e655de4fee609d2be6d5 Mon Sep 17 00:00:00 2001
From: Joshua Strobl <joshua@streambits.io>
Date: Sat, 27 Mar 2021 15:01:43 +0200
Subject: [PATCH 1/1] Make Info panel more relevant to Solus.

---
 panels/info-overview/cc-info-overview-panel.c | 23 +++++++------------
 panels/info-overview/meson.build              |  1 -
 2 files changed, 8 insertions(+), 16 deletions(-)

diff --git a/panels/info-overview/cc-info-overview-panel.c b/panels/info-overview/cc-info-overview-panel.c
index bd0e07762..d07b8115c 100644
--- a/panels/info-overview/cc-info-overview-panel.c
+++ b/panels/info-overview/cc-info-overview-panel.c
@@ -775,9 +775,9 @@ info_overview_panel_setup_overview (CcInfoOverviewPanel *self)
 }
 
 static gboolean
-does_gnome_software_exist (void)
+does_solus_sc_exist (void)
 {
-  g_autofree gchar *path = g_find_program_in_path ("gnome-software");
+  g_autofree gchar *path = g_find_program_in_path ("solus-sc");
   return path != NULL;
 }
 
@@ -795,10 +795,10 @@ open_software_update (CcInfoOverviewPanel *self)
   gboolean ret;
   char *argv[3];
 
-  if (does_gnome_software_exist ())
+  if (does_solus_sc_exist ())
     {
-      argv[0] = "gnome-software";
-      argv[1] = "--mode=updates";
+      argv[0] = "solus-sc";
+      argv[1] = "--update-view";
       argv[2] = NULL;
     }
   else
@@ -870,15 +870,8 @@ static void
 setup_os_logo (CcInfoOverviewPanel *panel)
 {
   g_autofree char *logo_name = g_get_os_info ("LOGO");
-  if (logo_name != NULL)
-    {
-      gtk_image_set_from_icon_name (panel->os_logo, logo_name, GTK_ICON_SIZE_INVALID);
-      gtk_image_set_pixel_size (panel->os_logo, 256);
-    }
-  else
-    {
-      gtk_image_set_from_resource (panel->os_logo, "/org/gnome/control-center/info-overview/GnomeLogoVerticalMedium.svg");
-    }
+  gtk_image_set_from_resource (panel->os_logo, "/org/gnome/control-center/info-overview/GnomeLogoVerticalMedium.svg");
+  gtk_image_set_pixel_size (panel->os_logo, 256);
 }
 
 static void
@@ -924,7 +917,7 @@ cc_info_overview_panel_init (CcInfoOverviewPanel *self)
 
   g_resources_register (cc_info_overview_get_resource ());
 
-  if (!does_gnome_software_exist () && !does_gpk_update_viewer_exist ())
+  if (!does_solus_sc_exist () && !does_gpk_update_viewer_exist ())
     gtk_widget_hide (GTK_WIDGET (self->software_updates_row));
 
   info_overview_panel_setup_overview (self);
diff --git a/panels/info-overview/meson.build b/panels/info-overview/meson.build
index 14663f24c..c24738a05 100644
--- a/panels/info-overview/meson.build
+++ b/panels/info-overview/meson.build
@@ -28,7 +28,6 @@ sources = files(
 )
 
 resource_data = files(
-  'GnomeLogoVerticalMedium.svg',
   'cc-info-overview-panel.ui'
 )
 
-- 
2.30.2

