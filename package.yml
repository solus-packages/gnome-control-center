name       : gnome-control-center
version    : 40.0
release    : 110
source     :
    - git|https://gitlab.gnome.org/GNOME/gnome-control-center.git : 40.0
license    : GPL-2.0-only
component  : desktop.gnome
summary    : The GNOME Control Center
description: |
    The GNOME Control Center
networking : yes
builddeps  :
    - pkgconfig(accountsservice)
    - pkgconfig(clutter-1.0)
    - pkgconfig(clutter-gtk-1.0)
    - pkgconfig(colord-gtk)
    - pkgconfig(com_err)
    - pkgconfig(dbus-glib-1)
    - pkgconfig(ibus-1.0)
    - pkgconfig(gnome-bluetooth-1.0)
    - pkgconfig(gnome-desktop-3.0)
    - pkgconfig(gnome-settings-daemon)
    - pkgconfig(goa-backend-1.0)
    - pkgconfig(grilo-0.3)
    - pkgconfig(gsettings-desktop-schemas)
    - pkgconfig(gsound)
    - pkgconfig(gtk+-3.0)
    - pkgconfig(libcanberra-gtk3)
    - pkgconfig(libgnome-menu-3.0)
    - pkgconfig(libgtop-2.0)
    - pkgconfig(libpulse-mainloop-glib)
    - pkgconfig(libsecret-1)
    - pkgconfig(libsoup-2.4)
    - pkgconfig(libwacom)
    - pkgconfig(ModemManager)
    - pkgconfig(pwquality)
    - pkgconfig(smbclient)
    - pkgconfig(udisks2)
    - pkgconfig(upower-glib)
    - bluez
    - cups-devel
    - docbook-xml
    - gnome-common
    - kerberos-devel
    - libnma-devel
patterns   :
    - devel :
        - /usr/share/pkgconfig/gnome-keybindings.pc
rundeps    :
    - bolt # Thunderbolt support
    - cups-pk-helper
    - glib-networking
    - gnome-color-manager
    - gvfs-goa
    - libgnomekbd
    - sound-theme-freedesktop
setup      : |
    %apply_patches
    mv $pkgfiles/start-here-solus.svg panels/info-overview/GnomeLogoVerticalMedium.svg
    pushd subprojects/libhandy
        git fetch
        git checkout fd76b1e5a3ea6f05723a52a4f6592c38330b08fa
        %patch -p1 < $pkgfiles/libhandy-reverts/0001-Don-t-install-cruft.-Change-so-name.patch
    popd
    %meson_configure -Dcheese=false -Ddocumentation=true
build      : |
    %ninja_build
install    : |
    %ninja_install
    rm $installdir/%libdir%/*.so

    # support keyfile backend in gnome-control-center
    install -m 00644 $pkgfiles/gnome-control-center.keyrules $installdir/usr/share/polkit-1/rules.d/.
